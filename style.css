:root{--page-ratio:2480/3508;--spread-ratio:calc(2*var(--page-ratio));}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0;background:#000;overflow:hidden;display:flex;justify-content:flex-start;align-items:center;flex-direction:row;user-select:none;font-family:system-ui,Segoe UI,Roboto,sans-serif;color:#fff}
.sidebar{width:150px;padding:10px;background:#111;height:100%;overflow-y:auto}
.rightbar{position:absolute;right:0;top:0;width:160px;height:100%;background:#111;padding:10px;overflow-y:auto;z-index:12000}
.sidebar button,.rightbar button{width:100%;margin:6px 0;padding:8px;background:#333;color:#fff;border:none;cursor:pointer;border-radius:4px}
.sidebar button:hover,.rightbar button:hover{background:#555}
.book-viewport{flex:1;display:flex;justify-content:center;align-items:center;position:relative;height:100%}
.book{position:relative;width:calc(min(90vw,90vh*var(--spread-ratio)));height:calc(min(90vh,90vw/var(--spread-ratio)));transform-style:preserve-3d;perspective:2000px;z-index:100}
.paper{position:absolute;width:50%;height:100%;top:0;left:50%;transform-style:preserve-3d;transform-origin:left center}
.paper .front,.paper .back{position:absolute;inset:0;backface-visibility:hidden;transform-style:preserve-3d;background:#000}
.paper .front{z-index:1;position:relative}
.paper .back{transform:rotateY(180deg) translateZ(0.1px)}
.page-image{width:100%;height:100%;object-fit:contain;display:block;pointer-events:none}
.arrow{position:absolute;top:50%;transform:translateY(-50%);font-size:3rem;color:#fff;cursor:pointer;user-select:none;z-index:20000;padding:6px 10px;background:rgba(0,0,0,.25);border-radius:6px}
.arrow.left{left:10px}
.arrow.right{right:10px}
.slider-wrap{position:absolute;bottom:10px;left:50%;transform:translateX(-50%);width:50%;z-index:11000}
.slider-wrap input{width:100%}
/* Lightbox */
.lightbox{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.45);backdrop-filter:blur(15px);justify-content:center;align-items:center;z-index:25000;opacity:0;transition:opacity 1s ease}
.lightbox.show{display:flex;opacity:1}
.lightbox-stage{position:relative;max-width:60vw;max-height:85vh;display:flex;align-items:center;justify-content:center}
.lightbox-stage img,.lightbox-stage video,.lightbox-stage iframe{max-width:60vw;max-height:85vh;border:none;border-radius:6px;background:transparent}
.lightbox-arrow{position:absolute;top:50%;transform:translateY(-50%);font-size:3rem;color:#fff;cursor:pointer;user-select:none;z-index:26000;padding:6px 10px;background:rgba(0,0,0,.25);border-radius:6px}
.lightbox-arrow.left{left:20px}
.lightbox-arrow.right{right:20px}
/* custom play overlay */
.lb-play{position:absolute;inset:auto;left:50%;top:50%;transform:translate(-50%,-50%);width:90px;height:90px;border-radius:50%;border:none;background:rgba(0,0,0,.55);color:#fff;font-size:40px;display:none;align-items:center;justify-content:center;z-index:27000;cursor:pointer}
.lb-play.show{display:flex}
